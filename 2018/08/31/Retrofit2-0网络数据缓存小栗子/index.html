<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Franck's blog"><meta name="keywords" content="franck，zzy"><title>Retrofit2.0网络数据缓存小栗子 | ZZY的Android世界</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Retrofit2.0网络数据缓存小栗子</h1><a id="logo" href="/.">ZZY的Android世界</a><p class="description">世界很大，大到可以ZYY</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Retrofit2.0网络数据缓存小栗子</h1><div class="post-meta"><a href="/2018/08/31/Retrofit2-0网络数据缓存小栗子/#comments" class="comment-count"></a><p><span class="date">Aug 31, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><a id="more"></a>
<h1 id="Retrofit2-0-拦截器"><a href="#Retrofit2-0-拦截器" class="headerlink" title="Retrofit2.0 拦截器"></a>Retrofit2.0 拦截器</h1><p>这几天初步理解了下Retrofit2.0，在接触到拦截器时，深深的被他的功能给吸引住了，从此不可自拔，O(∩_∩)O哈哈~。由于本人深感记忆力跟不上，特此在这里留下笔记。</p>
<p>首先拦截器是什么</p>
<p>他是一种能够监控、重写、重试调用的机制，在通常情况下，拦截器用来添加、移除、转换请求和响应的头部信息。比如将域名替换为IP地址，在请求头中添加host属性，也可以添加我们应用中的一些公共参数，比如设备id、版本号，等等。</p>
<ol>
<li>添加权限和添加包<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.INTERNET"</span>/&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'com.squareup.retrofit2:retrofit:2.1.0'</span></span><br><span class="line">implementation <span class="string">'com.squareup.retrofit2:converter-gson:2.1.0'</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>由于Retrofit2.0并没有对于拦截器的处理，于是还得在OkHttp中去处理拦截器的问题，然后将okhttp对象add到Retrofit初始化的代码中</li>
</ol>
<ul>
<li><p>编写一个网络请求的接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GankApi</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GET</span>(<span class="string">"data/&#123;type&#125;/&#123;count&#125;/&#123;page&#125;"</span>)</span><br><span class="line">    <span class="function">Call&lt;GankResEntity&gt; <span class="title">getGanHuo</span><span class="params">(@Path(<span class="string">"type"</span>)</span> String type,</span></span><br><span class="line"><span class="function">                           @<span class="title">Path</span><span class="params">(<span class="string">"count"</span>)</span> <span class="keyword">int</span> count,</span></span><br><span class="line"><span class="function">                           @<span class="title">Path</span><span class="params">(<span class="string">"page"</span>)</span> <span class="keyword">int</span> page)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>再创建一个类OkHttpProvider</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OkHttpProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"OkHttpProvider"</span>;</span><br><span class="line">    <span class="comment">//最大连接时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span>  DEFAULT_CONNECT_TIMEOUT = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> DEFAULT_WRITE_TIMEOUT = <span class="number">15</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> DEFAULT_READ_TIMEOUT = <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> OkHttpClient <span class="title">getCacheOkHttpClient</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getOkHttpClient(<span class="keyword">new</span> CacheControlInterceptor());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> OkHttpClient <span class="title">getOkHttpClient</span><span class="params">(Interceptor cacheControl)</span></span>&#123;</span><br><span class="line">        <span class="comment">//定制OkHttp</span></span><br><span class="line">        OkHttpClient.Builder httpClientBuilder = <span class="keyword">new</span> OkHttpClient.Builder();</span><br><span class="line">        <span class="comment">//设置超时时间</span></span><br><span class="line">        httpClientBuilder.connectTimeout(DEFAULT_CONNECT_TIMEOUT, TimeUnit.SECONDS);</span><br><span class="line">        httpClientBuilder.connectTimeout(DEFAULT_WRITE_TIMEOUT, TimeUnit.SECONDS);</span><br><span class="line">        httpClientBuilder.connectTimeout(DEFAULT_READ_TIMEOUT, TimeUnit.SECONDS);</span><br><span class="line">        <span class="comment">//设置缓存</span></span><br><span class="line">        File httpCacheDirectory = <span class="keyword">new</span> File(FileUtil.getAppRootDirectoryPath(),<span class="string">"OkHttpCache"</span>);</span><br><span class="line">        httpClientBuilder.cache(<span class="keyword">new</span> Cache(httpCacheDirectory,<span class="number">100</span>*<span class="number">1024</span>*<span class="number">1024</span>));</span><br><span class="line">        <span class="comment">//设置拦截器</span></span><br><span class="line">        httpClientBuilder.addInterceptor(<span class="keyword">new</span> LoggingInterceptor());</span><br><span class="line">        httpClientBuilder.addInterceptor(cacheControl);</span><br><span class="line">        <span class="keyword">return</span> httpClientBuilder.build();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 没有网络的情况下就从缓存中取</span></span><br><span class="line"><span class="comment">     * 有网络的情况则从网络获取</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheControlInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">            Request request = chain.request();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!NetworkUtils.isConnected(GankAppcation.getmInstance()))&#123;</span><br><span class="line">                request = request.newBuilder()</span><br><span class="line">                        .cacheControl(CacheControl.FORCE_CACHE)</span><br><span class="line">                        .build();</span><br><span class="line">            &#125;</span><br><span class="line">            Response response = chain.proceed(request);</span><br><span class="line">            <span class="keyword">if</span> (NetworkUtils.isConnected(GankAppcation.getmInstance()))&#123;</span><br><span class="line">                <span class="keyword">int</span> maxAge = <span class="number">60</span> * <span class="number">60</span> * <span class="number">2</span>;<span class="comment">//默认缓存2个小时</span></span><br><span class="line">                String cacheControl = request.cacheControl().toString();</span><br><span class="line">                <span class="keyword">if</span> (TextUtils.isEmpty(cacheControl))&#123;</span><br><span class="line">                    cacheControl = <span class="string">"public,max-age="</span> + maxAge;</span><br><span class="line">                &#125;</span><br><span class="line">                response = response.newBuilder()</span><br><span class="line">                        .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                        .header(<span class="string">"Cache-Control"</span>,cacheControl)</span><br><span class="line">                        .build();</span><br><span class="line">             &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> maxStale = <span class="number">60</span> * <span class="number">60</span>  * <span class="number">24</span> * <span class="number">30</span>;</span><br><span class="line">                response = response.newBuilder()</span><br><span class="line">                        .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                        .header(<span class="string">"Cache-Control"</span>,<span class="string">"publoc,only-is-cached, max-stale="</span>+maxStale)</span><br><span class="line">                        .build();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            Request request = chain.request();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line"></span><br><span class="line">            LogUtils.d(TAG,String.format(Locale.CHINA,<span class="string">"发送 request %s on %s%n%s"</span>,request.url(),chain.connection(),request.headers()));</span><br><span class="line">            Response response = chain.proceed(request);</span><br><span class="line">            <span class="keyword">long</span> t2 = System.nanoTime();</span><br><span class="line">            LogUtils.d(TAG, String.format(Locale.CHINA, <span class="string">"收到 response for %s in %.1fms ，数据来自%s%n"</span>,</span><br><span class="line">                    response.request().url(), (t2 - t1) / <span class="number">1e6</span>d, (response.cacheResponse() != <span class="keyword">null</span> ? <span class="string">"缓存"</span> : <span class="string">"网络"</span>)));</span><br><span class="line">            <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在这个类中，我创建了2个拦截器CacheControlInterceptor和LoggingInterceptor，CacheControlInterceptor顾名思义判断网络连接时，保存缓存的数据，未连接时，从网络上获取。第2个主要是log信息是否使用了缓存机制，response.cacheResponse() 。</p>
<ul>
<li><p>根据OkHttpProvider，我们可以获得OkHttpClient，下一步创建RetrofitHelper类，来获取Retorfit返回的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RetrofitHelper</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> OkHttpClient mOkHttpClient;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Gson mGson;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mGson = <span class="keyword">new</span> GsonBuilder()</span><br><span class="line">                .setDateFormat(<span class="string">"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"</span>)</span><br><span class="line">                .serializeNulls()</span><br><span class="line">                .create();</span><br><span class="line">        HttpLoggingInterceptor interceptor = <span class="keyword">new</span> HttpLoggingInterceptor();</span><br><span class="line">        interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);</span><br><span class="line">        mOkHttpClient = OkHttpProvider.getCacheOkHttpClient();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Retrofit <span class="title">newRetorfit</span><span class="params">(String baseUrl)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mOkHttpClient == <span class="keyword">null</span> || mGson == <span class="keyword">null</span>)&#123;</span><br><span class="line">            init();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Retrofit.Builder()</span><br><span class="line">                .baseUrl(baseUrl)</span><br><span class="line">                .client(mOkHttpClient)</span><br><span class="line">                .addConverterFactory(GsonConverterFactory.create(mGson))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建一个把请求数据封装在GankPresenter类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GankPresenter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"GankPresenter"</span>;</span><br><span class="line">    <span class="comment">//干货类型</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_ANDROID = <span class="string">"Android"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_WEB = <span class="string">"前端"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_RECOMMENT = <span class="string">"瞎推荐"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_IOS = <span class="string">"iOS"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_VIDEO = <span class="string">"休息视频"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_MEIZI = <span class="string">"福利"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_APP = <span class="string">"App"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_OTHER = <span class="string">"拓展资源"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认每次只能加载 10个数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_LOAD_COUNTS = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Gson sGson = <span class="keyword">new</span> GsonBuilder()</span><br><span class="line">            .setDateFormat(<span class="string">"yyyy-MM-dd HH:mm:SS"</span>)</span><br><span class="line">            .serializeNulls()</span><br><span class="line">            .create();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> GankApi <span class="title">getGankApi</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> GankSingletion.mInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getSpecifyGanHuo</span><span class="params">(<span class="keyword">final</span> String type, <span class="keyword">int</span> page , <span class="keyword">final</span> RetorfitListener&lt;List&lt;GanHuo&gt;&gt; callback)</span></span>&#123;</span><br><span class="line">        getGankApi().getGanHuo(type,DEFAULT_LOAD_COUNTS,page).enqueue(<span class="keyword">new</span> Callback&lt;GankResEntity&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call&lt;GankResEntity&gt; call, Response&lt;GankResEntity&gt; response)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (response.isSuccessful())&#123;</span><br><span class="line">                    LogUtils.d(TAG, type + <span class="string">"干货下载成功： "</span> + response.body().toString());</span><br><span class="line">                    Object results = response.body().getResults();</span><br><span class="line">                    Type t = <span class="keyword">new</span> TypeToken&lt;List&lt;GanHuo&gt;&gt;() &#123;</span><br><span class="line">                    &#125;.getType();</span><br><span class="line">                    List&lt;GanHuo&gt; data = sGson.fromJson(sGson.toJson(results), t);</span><br><span class="line">                    callback.onSuccess(data);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    LogUtils.e(TAG, type + <span class="string">"干货下载失败，code： "</span> + response.code());</span><br><span class="line">                    callback.onError(<span class="string">"请求失败，code: "</span> + response.code());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call&lt;GankResEntity&gt; call, Throwable t)</span> </span>&#123;</span><br><span class="line">                LogUtils.e(TAG,type + <span class="string">"干货下载失败"</span>, t);</span><br><span class="line">                callback.onError(t.getMessage());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">GankSingletion</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> GankApi mInstance = RetrofitHelper.newRetorfit(BuildConfig.GANK_SERVICE).create(GankApi.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除缓存文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Interceptor 为保存在SD卡里根目录的文件名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXTERNAL_DIRECTORY_NAME = <span class="string">"Interceptor"</span>;</span><br><span class="line">    <span class="comment">//判断外部存储是否能用</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isSDCardAvailable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String state = Environment.getExternalStorageState();</span><br><span class="line">        <span class="keyword">return</span> Environment.MEDIA_MOUNTED.equals(state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取外部存储的根目录 路径</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSDcardPath</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isSDCardAvailable())&#123;</span><br><span class="line">            <span class="keyword">return</span> Environment.getExternalStorageDirectory().getAbsolutePath();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span>  <span class="keyword">new</span> FileNotFoundException(<span class="string">"没有外部存储"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取程序的外部存储的数据存放根目录</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAppRootDirectoryPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isSDCardAvailable()) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                String path = getSDcardPath();</span><br><span class="line">                File file = <span class="keyword">new</span> File(path, EXTERNAL_DIRECTORY_NAME);</span><br><span class="line">                <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">                    file.mkdirs();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> file.getAbsolutePath();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取外部缓存的地址</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getExternalCacheDirectory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isSDCardAvailable())&#123;</span><br><span class="line">            String path = getAppRootDirectoryPath();</span><br><span class="line">            File file = <span class="keyword">new</span> File(path,<span class="string">"cache"</span>);</span><br><span class="line">            <span class="keyword">if</span> (!file.exists())&#123;</span><br><span class="line">                file.mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> file.getAbsolutePath();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除文件或文件夹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteFile</span><span class="params">(File file)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (File f : file.listFiles()) &#123;</span><br><span class="line">                deleteFile(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            file.delete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>*log如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">08-31 16:33:27.184 9727-10100/com.example.myinterceptor D/OkHttpProvider: Thread: OkHttp http://gank.io/..., intercept(OkHttpProvider.java:92)</span><br><span class="line">                                                                          发送 request http://gank.io/api/data/%E7%A6%8F%E5%88%A9/10/1 on null</span><br><span class="line">08-31 16:33:27.503 9727-10100/com.example.myinterceptor D/OkHttpProvider: Thread: OkHttp http://gank.io/..., intercept(OkHttpProvider.java:95)</span><br><span class="line">                                                                          收到 response for https://gank.io/api/data/%E7%A6%8F%E5%88%A9/10/1 in 313.3ms ，数据来自网络</span><br><span class="line">08-31 16:33:27.503 9727-10100/com.example.myinterceptor D/OkHttpProvider: intercept: null</span><br><span class="line">08-31 16:33:27.546 9727-9727/com.example.myinterceptor D/GankPresenter: Thread: main, onResponse(GankPresenter.java:49)</span><br><span class="line">                                                                        福利干货下载成功： GankResEntity&#123;category=null, error=false, results=&apos;[&#123;_id=5b830bba9d2122031f86ee51, createdAt=2018-08-27T04:21:14.703Z, desc=2018-08-27, publishedAt=2018-08-28T00:00:00.0Z, source=web, type=福利, url=https://ws1.sinaimg.cn/large/0065oQSqly1fuo54a6p0uj30sg0zdqnf.jpg, used=true, who=lijinshanmx&#125;, &#123;_id=5b7b836c9d212201e982de6e, createdAt=2018-08-21T11:13:48.989Z, desc=2018-08-21, publishedAt=2018-08-21T00:00:00.0Z, source=web, type=福利, url=https://ws1.sinaimg.cn/large/0065oQSqly1fuh5fsvlqcj30sg10onjk.jpg, used=true, who=lijinshanmx&#125;, &#123;_id=5b74e9409d21222c52ae4cb4, createdAt=2018-08-16T11:02:24.289Z, desc=2018-08-16, publishedAt=2018-08-16T00:00:00.0Z, source=api, type=福利, url=https://ws1.sinaimg.cn/large/0065oQSqly1fubd0blrbuj30ia0qp0yi.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b7102749d2122341d563844, createdAt=2018-08-13T12:00:52.458Z, desc=2018-08-13, publishedAt=2018-08-13T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqly1fu7xueh1gbj30hs0uwtgb.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b6bad449d21226f45755582, createdAt=2018-08-09T10:56:04.962Z, desc=2018-08-09, publishedAt=2018-08-09T00:00:00.0Z, source=web, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqgy1fu39hosiwoj30j60qyq96.jpg, used=true, who=lijinshanmx&#125;, &#123;_id=5b67b7fd9d2122195bdbd806, createdAt=2018-08-06T10:52:45.809Z, desc=2018-08-06, publishedAt=2018-08-06T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqly1ftzsj15hgvj30sg15hkbw.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b63cd4e9d21225e0d3f58c9, createdAt=2018-08-03T11:34:38.672Z, desc=2018-08-03, publishedAt=2018-08-03T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqgy1ftwcw4f4a5j30sg10j1g9.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b6151509d21225206860f08, createdAt=2018-08-01T14:21:04.556Z, desc=2018-08-01, publishedAt=2018-08-01T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqly1ftu6gl83ewj30k80tites.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b60356a9d212247776a2e0e, createdAt=2018-07-31T18:09:46.825Z, desc=2018-07-31, publishedAt=2018-07-31T00:00:00.0Z, source=api, type=福利, url=http://ww1.sinaimg.cn/large/0065oQSqgy1ftt7g8ntdyj30j60op7dq.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b5e93499d21220fc64181a9, createdAt=2018-07-30T12:25:45.937Z, desc=2018-07-30, publishedAt=2018-07-30T00:00:00.0Z, source=web, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqgy1ftrrvwjqikj30go0rtn2i.jpg, used=true, who=lijinshanmx&#125;]&apos;&#125;</span><br><span class="line">08-31 16:33:31.205 9727-10100/com.example.myinterceptor D/OkHttpProvider: Thread: OkHttp http://gank.io/..., intercept(OkHttpProvider.java:92)</span><br><span class="line">                                                                          发送 request http://gank.io/api/data/%E7%A6%8F%E5%88%A9/10/1 on null</span><br><span class="line">08-31 16:33:31.581 9727-10100/com.example.myinterceptor D/OkHttpProvider: Thread: OkHttp http://gank.io/..., intercept(OkHttpProvider.java:95)</span><br><span class="line">                                                                          收到 response for https://gank.io/api/data/%E7%A6%8F%E5%88%A9/10/1 in 388.0ms ，数据来自缓存</span><br><span class="line">08-31 16:33:31.581 9727-10100/com.example.myinterceptor D/OkHttpProvider: intercept: Response&#123;protocol=http/1.1, code=200, message=OK, url=https://gank.io/api/data/%E7%A6%8F%E5%88%A9/10/1&#125;</span><br><span class="line">08-31 16:33:31.602 9727-9727/com.example.myinterceptor D/GankPresenter: Thread: main, onResponse(GankPresenter.java:49)</span><br><span class="line">                                                                        福利干货下载成功： GankResEntity&#123;category=null, error=false, results=&apos;[&#123;_id=5b830bba9d2122031f86ee51, createdAt=2018-08-27T04:21:14.703Z, desc=2018-08-27, publishedAt=2018-08-28T00:00:00.0Z, source=web, type=福利, url=https://ws1.sinaimg.cn/large/0065oQSqly1fuo54a6p0uj30sg0zdqnf.jpg, used=true, who=lijinshanmx&#125;, &#123;_id=5b7b836c9d212201e982de6e, createdAt=2018-08-21T11:13:48.989Z, desc=2018-08-21, publishedAt=2018-08-21T00:00:00.0Z, source=web, type=福利, url=https://ws1.sinaimg.cn/large/0065oQSqly1fuh5fsvlqcj30sg10onjk.jpg, used=true, who=lijinshanmx&#125;, &#123;_id=5b74e9409d21222c52ae4cb4, createdAt=2018-08-16T11:02:24.289Z, desc=2018-08-16, publishedAt=2018-08-16T00:00:00.0Z, source=api, type=福利, url=https://ws1.sinaimg.cn/large/0065oQSqly1fubd0blrbuj30ia0qp0yi.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b7102749d2122341d563844, createdAt=2018-08-13T12:00:52.458Z, desc=2018-08-13, publishedAt=2018-08-13T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqly1fu7xueh1gbj30hs0uwtgb.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b6bad449d21226f45755582, createdAt=2018-08-09T10:56:04.962Z, desc=2018-08-09, publishedAt=2018-08-09T00:00:00.0Z, source=web, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqgy1fu39hosiwoj30j60qyq96.jpg, used=true, who=lijinshanmx&#125;, &#123;_id=5b67b7fd9d2122195bdbd806, createdAt=2018-08-06T10:52:45.809Z, desc=2018-08-06, publishedAt=2018-08-06T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqly1ftzsj15hgvj30sg15hkbw.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b63cd4e9d21225e0d3f58c9, createdAt=2018-08-03T11:34:38.672Z, desc=2018-08-03, publishedAt=2018-08-03T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqgy1ftwcw4f4a5j30sg10j1g9.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b6151509d21225206860f08, createdAt=2018-08-01T14:21:04.556Z, desc=2018-08-01, publishedAt=2018-08-01T00:00:00.0Z, source=api, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqly1ftu6gl83ewj30k80tites.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b60356a9d212247776a2e0e, createdAt=2018-07-31T18:09:46.825Z, desc=2018-07-31, publishedAt=2018-07-31T00:00:00.0Z, source=api, type=福利, url=http://ww1.sinaimg.cn/large/0065oQSqgy1ftt7g8ntdyj30j60op7dq.jpg, used=true, who=lijinshan&#125;, &#123;_id=5b5e93499d21220fc64181a9, createdAt=2018-07-30T12:25:45.937Z, desc=2018-07-30, publishedAt=2018-07-30T00:00:00.0Z, source=web, type=福利, url=https://ww1.sinaimg.cn/large/0065oQSqgy1ftrrvwjqikj30go0rtn2i.jpg, used=true, who=lijinshanmx&#125;]&apos;&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个小栗子在这就介绍完了，但拦截器的学习不会就此打住的，感觉掌握住了它，就能对网路随心所欲把，一大难点啊，哈哈。</p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/09/07/room-数据库的使用/" class="pre">room 数据库的使用</a><a href="/2018/08/17/ViewPager-Fragment-大小圆点显示和页面无限轮播/" class="next">ViewPager-Fragment页面无限轮播和大小圆点显示</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Retrofit2-0-拦截器"><span class="toc-text">Retrofit2.0 拦截器</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/09/一个使用MVP模式的登录注册的实现/">一个使用MVP模式的登录注册的实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/13/Retrofit-RxJava简单用法/">Retrofit+RxJava简单用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/07/room-数据库的使用/">room 数据库的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/31/Retrofit2-0网络数据缓存小栗子/">Retrofit2.0网络数据缓存小栗子</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/17/ViewPager-Fragment-大小圆点显示和页面无限轮播/">ViewPager-Fragment页面无限轮播和大小圆点显示</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/16/ViewPager-Fragment-的简单页面转换/">ViewPager Fragment简单页面转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/13/RecyclerView-的介绍-三（自定义分割线）/">RecyclerView-的介绍-三（自定义分割线）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/18/RecyclerView-的介绍-二/">RecyclerView-的介绍-二</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/13/RecyclerView-的介绍-一/">RecyclerView 的介绍(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/06/android-Activity的生命周期详解/">android-Activity的生命周期详解</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://deriklpw.github.io/" title="derik" target="_blank">derik</a><ul></ul><a href="http://sqhayden.github.io/" title="hayden" target="_blank">hayden</a><ul></ul><a href="http://sunnyslx.github.io/" title="sunny" target="_blank">sunny</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Franck Zhang.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>